// test_resp_fixed.ailang - No variable collisions

LibraryImport.Library.RESP

// Use completely unique variable names
test_resp_response = 0
test_resp_count = 0
test_resp_pass = 0
test_resp_arr = 0
test_resp_byte = 0

SubRoutine.TestRespArray {
    PrintMessage("Testing Array...")
    
    test_resp_arr = ArrayCreate(3)
    ArraySet(test_resp_arr, 0, "first")
    ArraySet(test_resp_arr, 1, "second")
    ArraySet(test_resp_arr, 2, "third")
    
    test_resp_response = RESP.Array(test_resp_arr)
    PrintMessage("  Response: ")
    PrintMessage(test_resp_response)
    
    test_resp_byte = GetByte(test_resp_response, 0)
    IfCondition EqualTo(test_resp_byte, 42) ThenBlock: {
        PrintMessage("  âœ“ Starts with *")
        test_resp_pass = Add(test_resp_pass, 1)
    }
    test_resp_count = Add(test_resp_count, 1)
    
    ArrayDestroy(test_resp_arr)
    Deallocate(test_resp_response, 0)
}

PrintMessage("=== RESP Test (Fixed) ===")
RunTask(TestRespArray)
PrintMessage("Tests: ")
PrintNumber(test_resp_count)
PrintMessage(" Passed: ")
PrintNumber(test_resp_pass)