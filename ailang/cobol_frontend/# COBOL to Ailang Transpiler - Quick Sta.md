# COBOL to Ailang Transpiler - Quick Start Guide

Get up and running with the COBOL transpiler in 5 minutes!

## Step 1: Setup (2 minutes)

```bash
# Navigate to your Ailang project root
cd /path/to/ailang/

# Create the cobol_frontend directory structure
mkdir -p cobol_frontend/tests

# Create the __init__.py file
touch cobol_frontend/__init__.py

# Copy or create the following files in cobol_frontend/:
# - cobol_lexer.py
# - cobol_parser.py
# - cobol_ast_converter.py
# - cobol_integration.py

# Verify the structure
ls -la cobol_frontend/
```

Expected directory structure:
```
ailang/
â”œâ”€â”€ main.py                    # Ailang compiler (must exist!)
â”œâ”€â”€ ailang_parser/
â”œâ”€â”€ ailang_compiler/
â”œâ”€â”€ aimacro_frontend/          # Existing Python transpiler
â””â”€â”€ cobol_frontend/            # New COBOL transpiler
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ cobol_lexer.py
    â”œâ”€â”€ cobol_parser.py
    â”œâ”€â”€ cobol_ast_converter.py
    â”œâ”€â”€ cobol_integration.py
    â””â”€â”€ tests/
```

## Step 2: Create Your First COBOL Program (1 minute)

Create `cobol_frontend/tests/hello.cbl`:

```cobol
       IDENTIFICATION DIVISION.
       PROGRAM-ID. HELLO-WORLD.
       
       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01 MESSAGE PIC X(30) VALUE "Hello from COBOL!".
       01 NUMBER PIC 9(4) VALUE 42.
       
       PROCEDURE DIVISION.
           DISPLAY MESSAGE.
           DISPLAY "The answer is: ".
           DISPLAY NUMBER.
           STOP RUN.
```

## Step 3: Compile and Run (1 minute)

```bash
# Compile the COBOL program
python3 cobol_frontend/cobol_integration.py cobol_frontend/tests/hello.cbl -o hello

# Run the compiled binary
./hello
```

Expected output:
```
Hello from COBOL!
The answer is: 
42
```

## Step 4: Explore with Debug Mode (1 minute)

```bash
# See what's happening under the hood
python3 cobol_frontend/cobol_integration.py cobol_frontend/tests/hello.cbl -o hello --debug
```

This shows you:
- âœ“ Tokens generated by the lexer
- âœ“ COBOL AST structure
- âœ“ Generated Ailang source code
- âœ“ Compilation stages

## Step 5: Try More Examples

### Example: Calculator with Conditionals

Create `calc.cbl`:

```cobol
       IDENTIFICATION DIVISION.
       PROGRAM-ID. CALCULATOR.
       
       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01 A PIC 9(4) VALUE 100.
       01 B PIC 9(4) VALUE 50.
       01 RESULT PIC 9(5) VALUE 0.
       
       PROCEDURE DIVISION.
           COMPUTE RESULT = A + B.
           DISPLAY "Sum: ".
           DISPLAY RESULT.
           
           COMPUTE RESULT = A - B.
           DISPLAY "Difference: ".
           DISPLAY RESULT.
           
           COMPUTE RESULT = A * B.
           DISPLAY "Product: ".
           DISPLAY RESULT.
           
           IF RESULT > 1000
               DISPLAY "Large result!"
           ELSE
               DISPLAY "Small result"
           END-IF.
           
           STOP RUN.
```

Compile and run:
```bash
python3 cobol_frontend/cobol_integration.py calc.cbl -o calc
./calc
```

### Example: Loops and Subroutines

Create `loop.cbl`:

```cobol
       IDENTIFICATION DIVISION.
       PROGRAM-ID. LOOP-DEMO.
       
       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01 COUNTER PIC 9(2) VALUE 0.
       01 TOTAL PIC 9(4) VALUE 0.
       
       PROCEDURE DIVISION.
       MAIN-LOGIC.
           DISPLAY "Starting loop...".
           PERFORM COUNT-TO-TEN.
           DISPLAY "Final total: ".
           DISPLAY TOTAL.
           STOP RUN.
       
       COUNT-TO-TEN.
           PERFORM UNTIL COUNTER = 10
               ADD 1 TO COUNTER
               ADD COUNTER TO TOTAL
               DISPLAY COUNTER
           END-PERFORM.
```

Compile and run:
```bash
python3 cobol_frontend/cobol_integration.py loop.cbl -o loop
./loop
```

## Common Commands Cheat Sheet

```bash
# Basic compilation
python3 cobol_frontend/cobol_integration.py program.cbl -o program

# With debug output
python3 cobol_frontend/cobol_integration.py program.cbl -o program --debug

# Generate Ailang only (no binary)
python3 cobol_frontend/cobol_integration.py program.cbl --ailang-only

# View generated Ailang
python3 cobol_frontend/cobol_integration.py program.cbl --ailang-only
cat program.ailang

# Compile Ailang separately
python3 main.py program.ailang -o program

# Run with debugging
python3 main.py program.ailang -o program -D

# Make executable
chmod +x program
./program
```

## Supported COBOL Features Quick Reference

### âœ… Working Now
- Variables: `PIC 9(n)`, `PIC X(n)`, `PIC S9(n)`
- Initialization: `VALUE "text"`, `VALUE 123`
- Output: `DISPLAY`
- Assignment: `MOVE ... TO ...`
- Arithmetic: `COMPUTE`, `ADD`, `SUBTRACT`, `MULTIPLY`, `DIVIDE`
- Conditionals: `IF ... THEN ... ELSE ... END-IF`
- Loops: `PERFORM UNTIL ... END-PERFORM`
- Subroutines: `PERFORM paragraph-name`
- Comparison: `=`, `>`, `<`, `NOT EQUAL`
- Exit: `STOP RUN`, `GOBACK`

### ðŸš§ Coming Soon
- `PERFORM ... TIMES`
- `PERFORM ... VARYING`
- `EVALUATE ... WHEN` (switch/case)
- `STRING`/`UNSTRING`
- Tables with `OCCURS`

## Troubleshooting

### "Backend compiler not found"
```bash
# Make sure you're in the ailang project root
pwd  # Should show .../ailang/

# Verify main.py exists
ls -l main.py

# If not, you're in the wrong directory
cd /path/to/ailang/
```

### "No module named 'cobol_lexer'"
```bash
# Make sure __init__.py exists
ls -l cobol_frontend/__init__.py

# Try running from project root
cd /path/to/ailang/
python3 cobol_frontend/cobol_integration.py program.cbl -o program
```

### "Lexer error" or "Parser error"
```bash
# Use --debug to see details
python3 cobol_frontend/cobol_integration.py program.cbl --debug

# Check COBOL syntax:
# - Column 7: Start code here (fixed format)
# - Periods: End statements with periods
# - Case: COBOL is case-insensitive
# - Indentation: Use proper alignment
```

### Binary won't execute
```bash
# Make it executable
chmod +x program

# Check compilation succeeded
ls -l program

# Try running with ./
./program

# If still fails, check Ailang compilation
python3 cobol_frontend/cobol_integration.py program.cbl --ailang-only
python3 main.py program.ailang -o program
```

## Next Steps

1. **Read the full README** - See `README.md` for comprehensive documentation
2. **Study the examples** - Look at sample programs in `tests/`
3. **Explore the code** - Understand how lexer â†’ parser â†’ converter works
4. **Write your own programs** - Start migrating COBOL code!
5. **Contribute** - Add new features, fix bugs, improve docs

## Quick Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COBOL Source   â”‚ Your .cbl file
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lexer          â”‚ cobol_lexer.py
â”‚  (Tokenize)     â”‚ Converts text â†’ tokens
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Parser         â”‚ cobol_parser.py
â”‚  (Build AST)    â”‚ Converts tokens â†’ COBOL AST
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Converter      â”‚ cobol_ast_converter.py
â”‚  (Transform)    â”‚ Converts COBOL AST â†’ Ailang AST
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Serializer     â”‚ cobol_ast_converter.py
â”‚  (Generate)     â”‚ Converts Ailang AST â†’ .ailang source
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ailang         â”‚ main.py
â”‚  Compiler       â”‚ Converts .ailang â†’ native binary
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Native Binary  â”‚ Your executable program!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tips for Converting COBOL

1. **Start Small**: Begin with simple programs
2. **Test Incrementally**: Compile after each feature addition
3. **Use Debug Mode**: Understand what's being generated
4. **Check Ailang Output**: Verify the generated .ailang makes sense
5. **Read Error Messages**: They point to the exact line/column
6. **Compare with Examples**: Use sample programs as templates

## Getting Help

```bash
# Show help
python3 cobol_frontend/cobol_integration.py --help

# Test the components individually
python3 cobol_frontend/cobol_lexer.py
python3 cobol_frontend/cobol_parser.py
python3 cobol_frontend/cobol_ast_converter.py
```

## Success Checklist

- [ ] Project structure created
- [ ] All four .py files in place
- [ ] `__init__.py` exists
- [ ] main.py exists in project root
- [ ] hello.cbl compiles successfully
- [ ] Generated binary runs correctly
- [ ] Debug mode shows all stages
- [ ] Ready to transpile COBOL!

---

**You're all set! Start transpiling COBOL to native binaries! ðŸŽ‰**

For more details, see the full [README.md](README.md) and explore the code in `cobol_frontend/`.