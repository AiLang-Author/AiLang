// test_string_replace.ailang
// Minimal test case to reproduce the StringReplaceAll segfault

LibraryImport.Cobol

// Test variables pool (like COBOL transpiler creates)
FixedPool.TestVars {
    "MESSAGE": Initialize="Hello World"
}

Function.Main {
    Input: ()
    Output: Integer
    Body: {
        PrintMessage("Test INSPECT: REPLACING ALL")
        PrintMessage(StringConcat("Before: ", TestVars.MESSAGE))
        
        // This is exactly what the COBOL transpiler generates
        TestVars.MESSAGE = StringReplaceAll(TestVars.MESSAGE, "o", "0")
        
        PrintMessage(StringConcat("After: ", TestVars.MESSAGE))
        
        ReturnValue(0)
    }
}