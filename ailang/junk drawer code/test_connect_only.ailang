// test_connect_debug.ailang
Debug("test", level=1) {
    PrintMessage("Creating socket...")
}

sock = SocketCreate()

Debug("test", level=1) {
    PrintMessage("Socket fd: ")
    PrintNumber(sock)
}

addr = Allocate(16)

Debug("test", level=1) {
    PrintMessage("Allocated addr: ")
    PrintNumber(addr)
}

SetByte(addr, 0, 2)
SetByte(addr, 1, 0)
SetByte(addr, 2, 235)
SetByte(addr, 3, 24)
SetByte(addr, 4, 127)
SetByte(addr, 5, 0)
SetByte(addr, 6, 0)
SetByte(addr, 7, 1)

i = 8
WhileLoop LessThan(i, 16) {
    SetByte(addr, i, 0)
    i = Add(i, 1)
}

Debug("test", level=1) {
    PrintMessage("Before SystemCall: sock=")
    PrintNumber(sock)
    PrintMessage(" addr=")
    PrintNumber(addr)
    PrintMessage(" len=16")
}

result = SystemCall(42, sock, addr, 16)

Debug("test", level=1) {
    PrintMessage("After SystemCall: result=")
    PrintNumber(result)
}

Deallocate(addr, 16)